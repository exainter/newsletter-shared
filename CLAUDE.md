# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a shared SDK and utilities library for the Newsletter SaaS platform. It serves as a central package containing:
- Shared types and utilities across the newsletter services
- An auto-generated SDK from the OpenAPI specification of `newsletter-api`
- Types for common entities like `Tenant`, `Campaign`, and `User`

The package is currently private and not published. It's designed to be consumed by other repositories in the Newsletter SaaS ecosystem (e.g., `newsletter-web`).

## Build and Development Commands

```bash
# Install dependencies
npm install

# Build the project (compiles TypeScript to dist/)
npm run build

# Clean build artifacts
npm run clean
```

## Project Structure

```
src/
  ├── index.ts          # Main entry point - re-exports types, utilities, and SDK
  └── sdk/              # Auto-generated SDK from OpenAPI (generated from newsletter-api)
```

The `dist/` directory contains compiled JavaScript and type definitions generated by the build.

## TypeScript Configuration

- **Target**: ES2020
- **Module**: CommonJS
- **Strict mode**: Enabled
- **Declaration files**: Generated automatically (dist/index.d.ts)

## Key Architectural Notes

### SDK Generation Workflow

The SDK is auto-generated from the `newsletter-api` OpenAPI specification using `openapi-typescript`. This is done manually with the following process:

1. Run from the `newsletter-api` repository:
   ```bash
   npx openapi-typescript openapi/spec.yaml -o ../newsletter-shared/src/sdk/types.ts
   ```
2. Return to this repository and build:
   ```bash
   cd ../newsletter-shared && npm run build
   ```

The generated SDK types live in `src/sdk/` and are re-exported through `src/index.ts` for consumers.

### Entry Point Pattern

All public APIs should be exported from `src/index.ts`. This is the single point of entry for consumers of this package. Any new utilities, types, or SDK components should be properly exported here.

### Package Publishing

Currently marked as `"private": true` in package.json. When ready to publish:
- Will be published to GitHub Packages as `@exainter/newsletter-shared`
- Should implement semantic versioning at that point
- Update package.json version accordingly

## Common Development Workflows

### Adding New Utilities or Types

1. Create your TypeScript files in `src/`
2. Export them from `src/index.ts`
3. Run `npm run build` to compile
4. The types will be available in `dist/index.d.ts`

### Updating the SDK

1. Update the OpenAPI specification in `newsletter-api`
2. Run the OpenAPI-TypeScript generator (see SDK Generation Workflow above)
3. Run `npm run build` to compile the updated SDK
4. Ensure exports in `src/index.ts` are updated if needed

## Related Repositories

- **newsletter-api**: Source of the OpenAPI specification
- **newsletter-web**: Frontend application that consumes this SDK
